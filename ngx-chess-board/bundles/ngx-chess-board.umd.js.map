{"version":3,"file":"ngx-chess-board.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","ng://ngx-chess-board/lib/models/pieces/color.ts","ng://ngx-chess-board/lib/models/pieces/piece.ts","ng://ngx-chess-board/lib/models/pieces/point.ts","ng://ngx-chess-board/lib/models/pieces/rook.ts","ng://ngx-chess-board/lib/models/pieces/king.ts","ng://ngx-chess-board/lib/utils/unicode-constants.ts","ng://ngx-chess-board/lib/models/pieces/queen.ts","ng://ngx-chess-board/lib/models/pieces/pawn.ts","ng://ngx-chess-board/lib/models/pieces/knight.ts","ng://ngx-chess-board/lib/models/pieces/bishop.ts","ng://ngx-chess-board/lib/models/board.ts","ng://ngx-chess-board/lib/utils/move-utils.ts","ng://ngx-chess-board/lib/service/ngx-chess-board.service.ts","ng://ngx-chess-board/lib/piece-decorator/piece-abstract-decorator.ts","ng://ngx-chess-board/lib/piece-decorator/available-move-decorator.ts","ng://ngx-chess-board/lib/board-state-provider/board-state-provider.ts","ng://ngx-chess-board/lib/board-state-provider/board-state.ts","ng://ngx-chess-board/lib/history-move-provider/history-move.ts","ng://ngx-chess-board/lib/history-move-provider/history-move-provider.ts","ng://ngx-chess-board/lib/utils/constants.ts","ng://ngx-chess-board/lib/coords/coords-provider.ts","ng://ngx-chess-board/lib/board-state-provider/board-loader.ts","ng://ngx-chess-board/lib/piece-promotion-modal/piece-promotion-modal.component.ts","ng://ngx-chess-board/lib/drawing-tools/arrow.ts","ng://ngx-chess-board/lib/drawing-tools/draw-point.ts","ng://ngx-chess-board/lib/drawing-tools/circle.ts","ng://ngx-chess-board/lib/drawing-tools/draw-provider.ts","ng://ngx-chess-board/lib/ngx-chess-board.component.ts","ng://ngx-chess-board/lib/ngx-chess-board.module.ts","ng://ngx-chess-board/lib/ngx-chess-board-view.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export enum Color{\r\n    WHITE,\r\n    BLACK\r\n}","import {Point} from './point';\r\nimport {Color} from './color';\r\nimport {AbstractPiece} from '../../piece-decorator/abstract-piece';\r\nimport {Board} from '../board';\r\n\r\nexport abstract class Piece implements AbstractPiece {\r\n  point: Point;\r\n  color: Color;\r\n  image: string;\r\n  checkPoints: Point[] = [];\r\n  relValue: number;\r\n  board: Board;\r\n\r\n  constructor(point: Point, color: Color, image: string, relValue: number, board: Board) {\r\n    this.color = color;\r\n    this.image = image;\r\n    this.point = point;\r\n    this.relValue = relValue;\r\n    this.board = board;\r\n  }\r\n\r\n  abstract getPossibleMoves(): Point[];\r\n\r\n  abstract getPossibleCaptures(): Point[];\r\n\r\n  abstract getCoveredFields(): Point[]; // zwraca liste punktow ktore sa puste lub istnieje na nich pionek tego samego koloru\r\n\r\n}\r\n","export class Point {\r\n  row: number;\r\n  col: number;\r\n\r\n  constructor(row: number, col: number) {\r\n    this.row = row;\r\n    this.col = col;\r\n  }\r\n\r\n  isEqual(that: Point) {\r\n    return that && this.row === that.row && this.col === that.col;\r\n  }\r\n\r\n  hasCoordsEqual(row: number, col: number) {\r\n    return row && col && this.row === row && this.col === col;\r\n  }\r\n}\r\n\r\n","import { Piece } from './piece';\r\nimport { Color } from './color';\r\nimport { Point } from './point';\r\nimport { King } from './king';\r\nimport {Board} from '../board';\r\n\r\nexport class Rook extends Piece {\r\n\r\n  isMovedAlready = false;\r\n\r\n  constructor(point: Point, color: Color, image: string, board: Board) {\r\n        super(point, color, image, 5, board);\r\n    }\r\n\r\n    getPossibleMoves(): Point[] {\r\n        let possiblePoints = [];\r\n\r\n        let row = this.point.row;\r\n        let col = this.point.col;\r\n\r\n        for (let i = row + 1; i < 8; ++i) { // dol\r\n            if (this.board.isFieldEmpty(i, col)) {\r\n                possiblePoints.push(new Point(i, col));\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (let i = row - 1; i >= 0; --i) { // gora\r\n            if (this.board.isFieldEmpty(i, col)) {\r\n                possiblePoints.push(new Point(i, col));\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (let j = col - 1; j >= 0; --j) { // lewo\r\n            if (this.board.isFieldEmpty(row, j)) {\r\n                possiblePoints.push(new Point(row, j));\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (let j = col + 1; j < 8; ++j) { // prawo\r\n            if (this.board.isFieldEmpty(row, j)) {\r\n                possiblePoints.push(new Point(row, j));\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return possiblePoints;\r\n    }\r\n\r\n    getPossibleCaptures(): Point[] {\r\n        let possiblePoints = [];\r\n\r\n        let row = this.point.row;\r\n        let col = this.point.col;\r\n\r\n        for (let i = row + 1; i < 8; ++i) { // dol\r\n            if (this.board.isFieldTakenByEnemy(i, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(i, col));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(i, col)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row - 1; i >= 0; --i) { // gora\r\n            if (this.board.isFieldTakenByEnemy(i, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(i, col));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(i, col)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let j = col - 1; j >= 0; --j) { // lewo\r\n            if (this.board.isFieldTakenByEnemy(row, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(row,j));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(row,j)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let j = col + 1; j < 8; ++j) { // prawo\r\n            if (this.board.isFieldTakenByEnemy(row, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(row, j));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(row, j)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return possiblePoints;\r\n    }\r\n\r\n\r\n    getCoveredFields(): Point[] {\r\n        let possiblePoints = [];\r\n\r\n        let row = this.point.row;\r\n        let col = this.point.col;\r\n\r\n        for (let i = row + 1; i < 8; ++i) { // dol\r\n            if (this.board.isFieldEmpty(i, col)){\r\n                possiblePoints.push(new Point(i, col));\r\n            } else {\r\n                if (!(this.board.getPieceByField instanceof King)) {\r\n                    possiblePoints.push(new Point(i, col));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row - 1; i >= 0; --i) { // gora\r\n            if (this.board.isFieldEmpty(i, col)){\r\n                possiblePoints.push(new Point(i, col));\r\n            } else {\r\n                if (!(this.board.getPieceByField instanceof King)) {\r\n                    possiblePoints.push(new Point(i, col));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let j = col - 1; j >= 0; --j) { // lewo\r\n            if (this.board.isFieldEmpty(row, j)){\r\n                possiblePoints.push(new Point(row, j));\r\n            } else {\r\n                if (!(this.board.getPieceByField instanceof King)) {\r\n                    possiblePoints.push(new Point(row, j));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let j = col + 1; j < 8; ++j) { // prawo\r\n            if (this.board.isFieldEmpty(row, j)){\r\n                possiblePoints.push(new Point(row, j));\r\n            } else {\r\n                if (!(this.board.getPieceByField instanceof King)) {\r\n                    possiblePoints.push(new Point(row, j));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return possiblePoints;\r\n    }\r\n\r\n}\r\n","import {Piece} from './piece';\r\nimport {Color} from './color';\r\nimport {Point} from './point';\r\nimport {Rook} from \"./rook\";\r\nimport {Board} from '../board';\r\n\r\nexport class King extends Piece {\r\n\r\n  castledAlready = false;\r\n  shortCastled = false;\r\n  longCastled = false;\r\n  isMovedAlready;\r\n  isCastling = false;\r\n\r\n  constructor(point: Point, color: Color, image: string, board: Board) {\r\n    super(point, color, image, 0, board);\r\n  }\r\n\r\n  getPossibleMoves(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n    // lewo\r\n    if (this.board.isFieldEmpty(row, col - 1) && !this.board.isFieldUnderAttack(row, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row, col - 1));\r\n    }\r\n\r\n    // prawo\r\n    if (this.board.isFieldEmpty(row, col + 1) && !this.board.isFieldUnderAttack(row, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row, col + 1));\r\n    }\r\n\r\n    // dol\r\n    if (this.board.isFieldEmpty(row + 1, col) && !this.board.isFieldUnderAttack(row + 1, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col));\r\n    }\r\n\r\n    // gora\r\n    if (this.board.isFieldEmpty(row - 1, col) && !this.board.isFieldUnderAttack(row - 1, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col));\r\n    }\r\n\r\n    // lewo gora\r\n    if (this.board.isFieldEmpty(row - 1, col - 1) && !this.board.isFieldUnderAttack(row - 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col - 1));\r\n    }\r\n    // prawo gora\r\n    if (this.board.isFieldEmpty(row - 1, col + 1) && !this.board.isFieldUnderAttack(row - 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col + 1));\r\n    }\r\n\r\n    // lewo dol\r\n    if (this.board.isFieldEmpty(row + 1, col - 1) && !this.board.isFieldUnderAttack(row + 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col - 1));\r\n    }\r\n    // prawo dol\r\n    if (this.board.isFieldEmpty(row + 1, col + 1) && !this.board.isFieldUnderAttack(row + 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col + 1));\r\n    }\r\n\r\n    if(!this.isMovedAlready){\r\n      let longCastlePossible = true;\r\n      for (let i = col - 1; i > 0; --i) {\r\n        if (!this.board.isFieldEmpty(row, i) || this.board.isFieldUnderAttack(row, i, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n          longCastlePossible = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (longCastlePossible && this.board.getPieceByField(row, 0)) {\r\n        let leftRook = this.board.getPieceByField(row, 0);\r\n        if (leftRook instanceof Rook) {\r\n          if (!leftRook.isMovedAlready) {\r\n            possiblePoints.push(new Point(row, col - 2));\r\n          }\r\n        }\r\n      }\r\n\r\n      let shortCastlePossible = true;\r\n      for (let i = col + 1; i < 7; ++i) {\r\n        if (!this.board.isFieldEmpty(row, i) || this.board.isFieldUnderAttack(row, i, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n          shortCastlePossible = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (shortCastlePossible && this.board.getPieceByField(row, 7)) {\r\n        let rightRook = this.board.getPieceByField(row, 7);\r\n        if (rightRook instanceof Rook) {\r\n          if (!rightRook.isMovedAlready) {\r\n            possiblePoints.push(new Point(row, col + 2));\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n  getPossibleCaptures(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    // lewo\r\n    if (this.board.isFieldTakenByEnemy(row, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row, col - 1));\r\n    }\r\n\r\n    // prawo\r\n    if (this.board.isFieldTakenByEnemy(row, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row, col + 1));\r\n    }\r\n\r\n    // dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row + 1, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col));\r\n    }\r\n\r\n    // gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row - 1, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col));\r\n    }\r\n\r\n    // lewo gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row - 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col - 1));\r\n    }\r\n    // prawo gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row - 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col + 1));\r\n    }\r\n\r\n    // lewo dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row + 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col - 1));\r\n    }\r\n    // prawo dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE) && !this.board.isFieldUnderAttack(row + 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col + 1));\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n  getCoveredFields(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    // lewo\r\n    if (this.board.isFieldTakenByEnemy(row, col - 1, this.color)) {\r\n      possiblePoints.push(new Point(row, col - 1));\r\n    }\r\n\r\n    // prawo\r\n    if (this.board.isFieldTakenByEnemy(row, col + 1, this.color)) {\r\n      possiblePoints.push(new Point(row, col + 1));\r\n    }\r\n\r\n    // dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col, this.color)) {\r\n      possiblePoints.push(new Point(row + 1, col));\r\n    }\r\n\r\n    // gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col, this.color)) {\r\n      possiblePoints.push(new Point(row - 1, col));\r\n    }\r\n\r\n    // lewo gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col - 1, this.color)) {\r\n      possiblePoints.push(new Point(row - 1, col - 1));\r\n    }\r\n    // prawo gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col + 1, this.color)) {\r\n      possiblePoints.push(new Point(row - 1, col + 1));\r\n    }\r\n\r\n    // lewo dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col - 1, this.color)) {\r\n      possiblePoints.push(new Point(row + 1, col - 1));\r\n    }\r\n    // prawo dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col + 1, this.color)) {\r\n      possiblePoints.push(new Point(row + 1, col + 1));\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n}\r\n","export class UnicodeConstants {\r\n\r\n  static WHITE_KING = '&#x2654;';\r\n  static WHITE_QUEEN = '&#x2655;';\r\n  static WHITE_KNIGHT = '&#x2658;';\r\n  static WHITE_ROOK = '&#x2656;';\r\n  static WHITE_PAWN = '&#x2659;';\r\n  static WHITE_BISHOP = '&#x2657;';\r\n\r\n  static BLACK_KING = '&#x265A;';\r\n  static BLACK_QUEEN = '&#x265B;';\r\n  static BLACK_KNIGHT = '&#x265E;';\r\n  static BLACK_ROOK = '&#x265C;';\r\n  static BLACK_PAWN = '&#x265F;';\r\n  static BLACK_BISHOP = '&#x265D;';\r\n\r\n}\r\n","import {Piece} from './piece';\r\nimport {Point} from './point';\r\nimport {Color} from './color';\r\nimport {King} from './king';\r\nimport {Board} from '../board';\r\n\r\nexport class Queen extends Piece {\r\n\r\n  constructor(point: Point, color: Color, image: string, board: Board) {\r\n    super(point, color, image, 9, board);\r\n  }\r\n\r\n  getPossibleMoves(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; --i, --j) { // lewa gorna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = row - 1, j = col + 1; i >= 0 && j < 8; --i, ++j) { // prawa gorna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = row + 1, j = col - 1; i < 8 && j >= 0; ++i, --j) { // lewa dolna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = row + 1, j = col + 1; i < 8 && j < 8; ++i, ++j) { // prawa dolna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = row + 1; i < 8; ++i) { // dol\r\n      if (this.board.isFieldEmpty(i, col)) {\r\n        possiblePoints.push(new Point(i, col));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = row - 1; i >= 0; --i) { // gora\r\n      if (this.board.isFieldEmpty(i, col)) {\r\n        possiblePoints.push(new Point(i, col));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let j = col - 1; j >= 0; --j) { // lewo\r\n      if (this.board.isFieldEmpty(row, j)) {\r\n        possiblePoints.push(new Point(row, j));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let j = col + 1; j < 8; ++j) { // prawo\r\n      if (this.board.isFieldEmpty(row, j)) {\r\n        possiblePoints.push(new Point(row, j));\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n  getPossibleCaptures(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; --i, --j) { // lewa gorna przekatna\r\n      if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(i, j));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(i, j)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row - 1, j = col + 1; i >= 0 && j < 8; --i, ++j) { // prawa gorna przekatna\r\n      if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(i, j));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(i, j)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row + 1, j = col - 1; i < 8 && j >= 0; ++i, --j) { // lewa dolna przekatna\r\n      if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(i, j));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(i, j)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row + 1, j = col + 1; i < 8 && j < 8; ++i, ++j) { // prawa dolna przekatna\r\n      if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(i, j));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(i, j)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    for (let i = row + 1; i < 8; ++i) { // dol\r\n      if (this.board.isFieldTakenByEnemy(i, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(i, col));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(i, col)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row - 1; i >= 0; --i) { // gora\r\n      if (this.board.isFieldTakenByEnemy(i, col, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(i, col));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(i, col)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let j = col - 1; j >= 0; --j) { // lewo\r\n      if (this.board.isFieldTakenByEnemy(row, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(row, j));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(row, j)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let j = col + 1; j < 8; ++j) { // prawo\r\n      if (this.board.isFieldTakenByEnemy(row, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(row, j));\r\n        break;\r\n      } else {\r\n        if (!this.board.isFieldEmpty(row, j)) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return possiblePoints;\r\n  }\r\n\r\n  getCoveredFields(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    for (let i = row + 1; i < 8; ++i) { // dol\r\n      if (this.board.isFieldEmpty(i, col)) {\r\n        possiblePoints.push(new Point(i, col));\r\n      } else {\r\n        if (!(this.board.getPieceByField(i, col) instanceof King)) {\r\n          possiblePoints.push(new Point(i, col));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row - 1; i >= 0; --i) { // gora\r\n      if (this.board.isFieldEmpty(i, col)) {\r\n        possiblePoints.push(new Point(i, col));\r\n      } else {\r\n        if (!(this.board.getPieceByField(i, col) instanceof King)) {\r\n          possiblePoints.push(new Point(i, col));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let j = col - 1; j >= 0; --j) { // lewo\r\n      if (this.board.isFieldEmpty(row, j)) {\r\n        possiblePoints.push(new Point(row, j));\r\n      } else {\r\n        if (!(this.board.getPieceByField(row, j) instanceof King)) {\r\n          possiblePoints.push(new Point(row, j));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let j = col + 1; j < 8; ++j) { // prawo\r\n      if (this.board.isFieldEmpty(row, j)) {\r\n        possiblePoints.push(new Point(row, j));\r\n      } else {\r\n        if (!(this.board.getPieceByField(row, j) instanceof King)) {\r\n          possiblePoints.push(new Point(row, j));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; --i, --j) { // lewa gorna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n          possiblePoints.push(new Point(i, j));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row - 1, j = col + 1; i >= 0 && j < 8; --i, ++j) { // prawa gorna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n          possiblePoints.push(new Point(i, j));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row + 1, j = col - 1; i < 8 && j >= 0; ++i, --j) { // lewa dolna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n          possiblePoints.push(new Point(i, j));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = row + 1, j = col + 1; i < 8 && j < 8; ++i, ++j) { // prawa dolna przekatna\r\n      if (this.board.isFieldEmpty(i, j)) {\r\n        possiblePoints.push(new Point(i, j));\r\n      } else {\r\n        if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n          possiblePoints.push(new Point(i, j));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n}\r\n","import {Piece} from './piece';\r\nimport {Color} from './color';\r\nimport {Point} from './point';\r\nimport {Board} from '../board';\r\n\r\nexport class Pawn extends Piece {\r\n\r\n  isMovedAlready = false;\r\n\r\n  constructor(point: Point, color: Color, image: string, board: Board) {\r\n    super(point, color, image, 1, board);\r\n  }\r\n\r\n  getPossibleMoves(): Point[] {\r\n    let possiblePoints = [];\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n    if ((!this.board.reverted && this.color === Color.WHITE) || (this.board.reverted && this.color === Color.BLACK)) {\r\n      if (this.board.isFieldEmpty(row - 1, col)) {\r\n        possiblePoints.push(new Point(row - 1, col));\r\n\r\n        if (!this.isMovedAlready && this.board.isFieldEmpty(row - 2, col)) {\r\n          possiblePoints.push(new Point(row - 2, col));\r\n        }\r\n      }\r\n    } else {\r\n      if (/*!board.isFieldTakenByEnemy(row + 1, col, Color.WHITE) &&*/ this.board.isFieldEmpty(row + 1, col)) {\r\n        possiblePoints.push(new Point(row + 1, col));\r\n\r\n        if (!this.isMovedAlready && this.board.isFieldEmpty(row + 2, col)) {\r\n          possiblePoints.push(new Point(row + 2, col));\r\n        }\r\n      }\r\n    }\r\n    return possiblePoints;\r\n  }\r\n\r\n  getPossibleCaptures(): Point[] {\r\n    let possiblePoints = [];\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    if ((!this.board.reverted && this.color === Color.WHITE) || (this.board.reverted && this.color === Color.BLACK)) {\r\n      if (this.board.isFieldTakenByEnemy(row - 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(row - 1, col - 1));\r\n      }\r\n      if (this.board.isFieldTakenByEnemy(row - 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(row - 1, col + 1));\r\n      }\r\n    } else {\r\n      if (this.board.isFieldTakenByEnemy(row + 1, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(row + 1, col - 1));\r\n      }\r\n      if (this.board.isFieldTakenByEnemy(row + 1, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n        possiblePoints.push(new Point(row + 1, col + 1));\r\n      }\r\n    }\r\n\r\n    if (this.board.enPassantPoint && this.board.enPassantPiece.color === (this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      if (row === this.board.enPassantPiece.point.row && Math.abs(this.board.enPassantPiece.point.col - col) === 1) {\r\n        possiblePoints.push(this.board.enPassantPoint);\r\n      }\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n  getCoveredFields(): Point[] {\r\n    let possiblePoints = [];\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    if ((!this.board.reverted && this.color === Color.WHITE) || (this.board.reverted && this.color === Color.BLACK)) {\r\n\r\n      possiblePoints.push(new Point(row - 1, col - 1));\r\n\r\n      possiblePoints.push(new Point(row - 1, col + 1));\r\n    } else {\r\n      possiblePoints.push(new Point(row + 1, col - 1));\r\n\r\n      possiblePoints.push(new Point(row + 1, col + 1));\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n}\r\n","import {Piece} from './piece';\r\nimport {Point} from './point';\r\nimport {Color} from './color';\r\nimport {Board} from '../board';\r\n\r\nexport class Knight extends Piece {\r\n\r\n  isMovedAlready = false;\r\n\r\n  constructor(point: Point, color: Color, image: string, board: Board) {\r\n    super(point, color, image, 3, board);\r\n  }\r\n\r\n  getPossibleMoves(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    // gora -> lewo\r\n    if (this.board.isFieldEmpty(row - 2, col - 1)) {\r\n      possiblePoints.push(new Point(row - 2, col - 1));\r\n    }\r\n\r\n    // gora -> prawo\r\n    if (this.board.isFieldEmpty(row - 2, col + 1)) {\r\n      possiblePoints.push(new Point(row - 2, col + 1));\r\n    }\r\n\r\n    // lewo -> gora\r\n    if (this.board.isFieldEmpty(row - 1, col - 2)) {\r\n      possiblePoints.push(new Point(row - 1, col - 2));\r\n    }\r\n\r\n    // prawo -> gora\r\n    if (this.board.isFieldEmpty(row - 1, col + 2)) {\r\n      possiblePoints.push(new Point(row - 1, col + 2));\r\n    }\r\n\r\n    // lewo -> dol\r\n    if (this.board.isFieldEmpty(row + 1, col - 2)) {\r\n      possiblePoints.push(new Point(row + 1, col - 2));\r\n    }\r\n\r\n    // prawo -> dol\r\n    if (this.board.isFieldEmpty(row + 1, col + 2)) {\r\n      possiblePoints.push(new Point(row + 1, col + 2));\r\n    }\r\n\r\n    // dol -> lewo\r\n    if (this.board.isFieldEmpty(row + 2, col - 1)) {\r\n      possiblePoints.push(new Point(row + 2, col - 1));\r\n    }\r\n\r\n    // dol -> prawo\r\n    if (this.board.isFieldEmpty(row + 2, col + 1)) {\r\n      possiblePoints.push(new Point(row + 2, col + 1));\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n  getPossibleCaptures(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    // gora -> lewo\r\n    if (this.board.isFieldTakenByEnemy(row - 2, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 2, col - 1));\r\n    }\r\n\r\n    // gora -> prawo\r\n    if (this.board.isFieldTakenByEnemy(row - 2, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 2, col + 1));\r\n    }\r\n\r\n    // lewo -> gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col - 2, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col - 2));\r\n    }\r\n\r\n    // prawo -> gora\r\n    if (this.board.isFieldTakenByEnemy(row - 1, col + 2, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row - 1, col + 2));\r\n    }\r\n\r\n    // lewo -> dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col - 2, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col - 2));\r\n    }\r\n\r\n    // prawo -> dol\r\n    if (this.board.isFieldTakenByEnemy(row + 1, col + 2, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 1, col + 2));\r\n    }\r\n\r\n    // dol -> lewo\r\n    if (this.board.isFieldTakenByEnemy(row + 2, col - 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 2, col - 1));\r\n    }\r\n\r\n    // dol -> prawo\r\n    if (this.board.isFieldTakenByEnemy(row + 2, col + 1, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n      possiblePoints.push(new Point(row + 2, col + 1));\r\n    }\r\n\r\n    return possiblePoints;\r\n  }\r\n\r\n  getCoveredFields(): Point[] {\r\n    let possiblePoints = [];\r\n\r\n    let row = this.point.row;\r\n    let col = this.point.col;\r\n\r\n    // gora -> lewo\r\n    possiblePoints.push(new Point(row - 2, col - 1));\r\n\r\n\r\n    // gora -> prawo\r\n    possiblePoints.push(new Point(row - 2, col + 1));\r\n\r\n    // lewo -> gora\r\n    possiblePoints.push(new Point(row - 1, col - 2));\r\n\r\n    // prawo -> gora\r\n    possiblePoints.push(new Point(row - 1, col + 2));\r\n\r\n    // lewo -> dol\r\n    possiblePoints.push(new Point(row + 1, col - 2));\r\n\r\n    // prawo -> dol\r\n    possiblePoints.push(new Point(row + 1, col + 2));\r\n\r\n    // dol -> lewo\r\n    possiblePoints.push(new Point(row + 2, col - 1));\r\n\r\n\r\n    // dol -> prawo\r\n    possiblePoints.push(new Point(row + 2, col + 1));\r\n\r\n\r\n    return possiblePoints;\r\n  }\r\n}\r\n","import { Piece } from './piece';\r\nimport { Color } from './color';\r\nimport { Point } from './point';\r\nimport { King } from './king';\r\nimport {Board} from '../board';\r\n\r\nexport class Bishop extends Piece {\r\n\r\n  constructor(point: Point, color: Color, image: string, board: Board) {\r\n        super(point, color, image, 3, board);\r\n    }\r\n\r\n    getPossibleMoves(): Point[] {\r\n        let possiblePoints = [];\r\n\r\n        let row = this.point.row;\r\n        let col = this.point.col;\r\n\r\n        for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; --i, --j) { // lewa gorna przekatna\r\n            if (this.board.isFieldEmpty(i, j)) {\r\n                possiblePoints.push(new Point(i, j));\r\n            } //else if (board.getPieceByField(i, j) instanceof King && (board.getPieceByField(i, j).color !== this.color)){\r\n               // for( let a = row - 1, b = col - 1; a > i && j >= col; --a, --b){\r\n                 //   possiblePoints.push(new Point(i, j));\r\n             //   }\r\n           // }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (let i = row - 1, j = col + 1; i >= 0 && j < 8; --i, ++j) { // prawa gorna przekatna\r\n            if (this.board.isFieldEmpty(i, j)) {\r\n                possiblePoints.push(new Point(i, j));\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (let i = row + 1, j = col - 1; i < 8 && j >= 0; ++i, --j) { // lewa dolna przekatna\r\n            if (this.board.isFieldEmpty(i, j)) {\r\n                possiblePoints.push(new Point(i, j));\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (let i = row + 1, j = col + 1; i < 8 && j < 8; ++i, ++j) { // prawa dolna przekatna\r\n            if (this.board.isFieldEmpty(i, j)) {\r\n                possiblePoints.push(new Point(i, j));\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return possiblePoints;\r\n    }\r\n\r\n    getPossibleCaptures() {\r\n        let possiblePoints = [];\r\n\r\n        let row = this.point.row;\r\n        let col = this.point.col;\r\n\r\n        for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; --i, --j) { // lewa gorna przekatna\r\n            if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(i, j));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(i, j)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row - 1, j = col + 1; i >= 0 && j < 8; --i, ++j) { // prawa gorna przekatna\r\n            if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(i, j));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(i, j)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row + 1, j = col - 1; i < 8 && j >= 0; ++i, --j) { // lewa dolna przekatna\r\n            if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(i, j));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(i, j)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row + 1, j = col + 1; i < 8 && j < 8; ++i, ++j) { // prawa dolna przekatna\r\n            if (this.board.isFieldTakenByEnemy(i, j, this.color === Color.WHITE ? Color.BLACK : Color.WHITE)) {\r\n                possiblePoints.push(new Point(i, j));\r\n                break;\r\n            } else {\r\n                if (!this.board.isFieldEmpty(i, j)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return possiblePoints;\r\n    }\r\n\r\n    getCoveredFields(): Point[] {\r\n        let possiblePoints = [];\r\n\r\n        let row = this.point.row;\r\n        let col = this.point.col;\r\n\r\n        for (let i = row - 1, j = col - 1; i >= 0 && j >= 0; --i, --j) { // lewa gorna przekatna\r\n            if (this.board.isFieldEmpty(i, j))\r\n                possiblePoints.push(new Point(i, j));\r\n            else {\r\n                if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n                    possiblePoints.push(new Point(i, j));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row - 1, j = col + 1; i >= 0 && j < 8; --i, ++j) { // prawa gorna przekatna\r\n            if (this.board.isFieldEmpty(i, j))\r\n                possiblePoints.push(new Point(i, j));\r\n            else {\r\n                if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n                    possiblePoints.push(new Point(i, j));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row + 1, j = col - 1; i < 8 && j >= 0; ++i, --j) { // lewa dolna przekatna\r\n            if (this.board.isFieldEmpty(i, j))\r\n                possiblePoints.push(new Point(i, j));\r\n            else {\r\n                if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n                    possiblePoints.push(new Point(i, j));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = row + 1, j = col + 1; i < 8 && j < 8; ++i, ++j) { // prawa dolna przekatna\r\n            if (this.board.isFieldEmpty(i, j))\r\n                possiblePoints.push(new Point(i, j));\r\n            else {\r\n                if (!(this.board.getPieceByField(i, j) instanceof King)) {\r\n                    possiblePoints.push(new Point(i, j));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return possiblePoints;\r\n    }\r\n\r\n}\r\n","import {Point} from './pieces/point';\r\nimport {Color} from './pieces/color';\r\nimport {King} from './pieces/king';\r\nimport {Piece} from './pieces/piece';\r\nimport {cloneDeep} from 'lodash';\r\nimport {Rook} from './pieces/rook';\r\nimport {Knight} from './pieces/knight';\r\nimport {Bishop} from './pieces/bishop';\r\nimport {Queen} from './pieces/queen';\r\nimport {Pawn} from './pieces/pawn';\r\n\r\nexport class Board {\r\n\r\n  board: number[][];\r\n  pieces: Piece[] = [];\r\n\r\n  enPassantPoint: Point = null;\r\n  enPassantPiece: Piece = null;\r\n  lastMoveSrc: Point = null;\r\n  lastMoveDest: Point = null;\r\n  activePiece: Piece;\r\n\r\n  blackKingChecked: boolean;\r\n  possibleCaptures: any[] = [];\r\n  possibleMoves: Point[] = [];\r\n  whiteKingChecked: boolean;\r\n\r\n  currentWhitePlayer = true;\r\n  reverted: boolean = false;\r\n  fullMoveCount: number = 1;\r\n  fen: string;\r\n\r\n  constructor() {\r\n\r\n    this.board = [];\r\n    for (var i: number = 0; i < 8; ++i) {\r\n      this.board[i] = [];\r\n      for (var j: number = 0; j < 8; ++j) {\r\n        this.board[i][j] = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  isXYInPossibleMoves(row: number, col: number): boolean {\r\n    return this.possibleMoves.some(e => e.row === row && e.col === col);\r\n  }\r\n\r\n  isXYInPossibleCaptures(row: number, col: number): boolean {\r\n    return this.possibleCaptures.some(e => e.row === row && e.col === col);\r\n  }\r\n\r\n  isXYInSourceMove(i: number, j: number) {\r\n    return this.lastMoveSrc && this.lastMoveSrc.row === i && this.lastMoveSrc.col === j;\r\n  }\r\n\r\n  isXYInDestMove(i: number, j: number) {\r\n    return this.lastMoveDest && this.lastMoveDest.row === i && this.lastMoveDest.col === j;\r\n  }\r\n\r\n  isXYInActiveMove(i: number, j: number) {\r\n    return this.activePiece && this.activePiece.point.row === i && this.activePiece.point.col === j;\r\n  }\r\n\r\n  isPointInPossibleMoves(point: Point): boolean {\r\n    return this.possibleMoves.some(e => e.row === point.row && e.col === point.col);\r\n  }\r\n\r\n  isPointInPossibleCaptures(point: Point): boolean {\r\n    return this.possibleCaptures.some(e => e.row === point.row && e.col === point.col);\r\n  }\r\n\r\n  reset() {\r\n    this.lastMoveDest = null;\r\n    this.lastMoveSrc = null;\r\n    this.whiteKingChecked = false;\r\n    this.blackKingChecked = false;\r\n    this.possibleCaptures = [];\r\n    this.possibleMoves = [];\r\n    this.activePiece = null;\r\n    this.reverted = false;\r\n    this.currentWhitePlayer = true;\r\n    this.enPassantPoint = null;\r\n    this.enPassantPiece = null;\r\n    this.fullMoveCount = 1;\r\n    this.calculateFEN();\r\n  }\r\n\r\n  reverse() {\r\n    this.reverted = !this.reverted;\r\n    this.activePiece = null;\r\n    this.possibleMoves = [];\r\n    this.possibleCaptures = [];\r\n    for (let i = 0; i < this.pieces.length; ++i) {\r\n      this.reversePoint(this.pieces[i].point);\r\n    }\r\n\r\n    this.reversePoint(this.lastMoveSrc);\r\n\r\n    if (this.enPassantPoint && this.enPassantPiece) {\r\n      this.reversePoint(this.enPassantPoint);\r\n    }\r\n  }\r\n\r\n  private reversePoint(point: Point) {\r\n    if (point) {\r\n      point.row = Math.abs(point.row - 7);\r\n      point.col = Math.abs(point.col - 7);\r\n    }\r\n  }\r\n\r\n  clone(): Board {\r\n    return cloneDeep(this);\r\n  }\r\n\r\n  isFieldTakenByEnemy(row: number, col: number, enemyColor: Color): boolean {\r\n    if (row > 7 || row < 0 || col > 7 || col < 0) {\r\n      return false;\r\n    }\r\n    return this.pieces.some(e => e.point.col === col && e.point.row === row && e.color === enemyColor);\r\n  }\r\n\r\n  isFieldEmpty(row: number, col: number): boolean {\r\n    if (row > 7 || row < 0 || col > 7 || col < 0) {\r\n      return false;\r\n    }\r\n    return !this.pieces.some(e => e.point.col === col && e.point.row === row);\r\n  }\r\n\r\n  isFieldUnderAttack(row: number, col: number, color: Color) {\r\n    let found = false;\r\n    return this.pieces.filter(e => e.color === color).some(e => e.getCoveredFields().some(f => f.col === col && f.row === row));\r\n  }\r\n\r\n  getPieceByField(row: number, col: number): Piece {\r\n    if (this.isFieldEmpty(row, col)) {\r\n      //   throw new Error('Piece not found');\r\n      return undefined;\r\n    }\r\n\r\n    return this.pieces.find(e => e.point.col === col && e.point.row === row);\r\n  }\r\n\r\n  isKingInCheck(color: Color, piece: Piece[]): boolean {\r\n    let king = piece\r\n      .find(e => e.color === color && e instanceof King);\r\n\r\n    if (king) {\r\n      return piece.some(e => e.getPossibleCaptures().some(e => e.col === king.point.col && e.row === king.point.row) && e.color !== color);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getKingByColor(color: Color): King {\r\n    return <King> this.pieces.find(e => (e instanceof King) && e.color === color);\r\n  }\r\n\r\n  getCastleFENString(color: Color) {\r\n    let king = this.getKingByColor(color);\r\n\r\n    if (king.isMovedAlready) {\r\n      return '';\r\n    }\r\n\r\n    let fen = '';\r\n    let leftRook = this.getPieceByField(king.point.row, 0);\r\n    let rightRook = this.getPieceByField(king.point.row, 7);\r\n\r\n    if (rightRook instanceof Rook && rightRook.color === color) {\r\n      if (!rightRook.isMovedAlready) {\r\n        fen += this.reverted ? 'q' : 'k';\r\n      }\r\n    }\r\n\r\n    if (leftRook instanceof Rook && leftRook.color === color) {\r\n      if (!leftRook.isMovedAlready) {\r\n        fen += this.reverted ? 'k' : 'q';\r\n      }\r\n    }\r\n\r\n    fen = fen.split('').sort().join(\"\");\r\n    return color === Color.BLACK ? fen : fen.toUpperCase();\r\n  }\r\n\r\n  getEnPassantFENString() {\r\n    if (this.enPassantPoint) {\r\n      if (this.reverted) {\r\n        return String.fromCharCode(104 - this.enPassantPoint.col) + (this.enPassantPoint.row + 1);\r\n      } else {\r\n        return String.fromCharCode(97 + this.enPassantPoint.col) + (Math.abs(this.enPassantPoint.row - 7) + 1);\r\n      }\r\n    } else {\r\n      return '-';\r\n    }\r\n  }\r\n\r\n\r\n  calculateFEN() {\r\n    let fen = '';\r\n    for (let i = 0; i < 8; ++i) {\r\n      let emptyFields = 0;\r\n      for (let j = 0; j < 8; ++j) {\r\n        let piece = this.pieces.find(e => e.point.col === j && e.point.row === i);\r\n        if (piece) {\r\n          if (emptyFields > 0) {\r\n            fen += emptyFields;\r\n            emptyFields = 0;\r\n          }\r\n\r\n          if (piece instanceof Rook) {\r\n            fen += piece.color === Color.BLACK ? 'r' : 'R';\r\n          } else if (piece instanceof Knight) {\r\n            fen += piece.color === Color.BLACK ? 'n' : 'N';\r\n          } else if (piece instanceof Bishop) {\r\n            fen += piece.color === Color.BLACK ? 'b' : 'B';\r\n          } else if (piece instanceof Queen) {\r\n            fen += piece.color === Color.BLACK ? 'q' : 'Q';\r\n          } else if (piece instanceof King) {\r\n            fen += piece.color === Color.BLACK ? 'k' : 'K';\r\n          } else if (piece instanceof Pawn) {\r\n            fen += piece.color === Color.BLACK ? 'p' : 'P';\r\n          }\r\n        } else {\r\n          ++emptyFields;\r\n        }\r\n      }\r\n\r\n      if (emptyFields > 0) {\r\n        fen += emptyFields;\r\n      }\r\n\r\n      fen += '/';\r\n    }\r\n\r\n    fen = fen.substr(0, fen.length - 1);\r\n\r\n    if (this.reverted) {\r\n      fen = fen.split('').reverse().join('');\r\n    }\r\n\r\n    fen += (' ' + (this.currentWhitePlayer ? 'w' : 'b'));\r\n    let whiteEnPassant = this.getCastleFENString(Color.WHITE);\r\n    let blackEnPassant = this.getCastleFENString(Color.BLACK);\r\n    let concatedEnPassant = whiteEnPassant + blackEnPassant;\r\n    if (!concatedEnPassant) {\r\n      concatedEnPassant = '-';\r\n    }\r\n\r\n    fen += (' ' + concatedEnPassant);\r\n    fen += (' ' + (this.getEnPassantFENString()));\r\n    fen += ' ' + 0;\r\n    fen += ' ' + this.fullMoveCount;\r\n    this.fen = fen;\r\n  }\r\n\r\n  isXYInPointSelection(i: number, j: number) {\r\n    return false;\r\n  }\r\n}\r\n","import {Color} from '../models/pieces/color';\r\nimport {Board} from '../models/board';\r\nimport {Point} from '../models/pieces/point';\r\n\r\nexport class MoveUtils {\r\n\r\n  public static willMoveCauseCheck(currentColor: Color, row: number, col: number, destRow: number, destCol: number, board: Board) {\r\n    let srcPiece = board.getPieceByField(row, col);\r\n    let destPiece = board.getPieceByField(destRow, destCol);\r\n\r\n    if (srcPiece) {\r\n      srcPiece.point.row = destRow;\r\n      srcPiece.point.col = destCol;\r\n    }\r\n\r\n    if (destPiece) {\r\n      board.pieces = board.pieces.filter(e => e !== destPiece);\r\n    }\r\n    let isBound = board.isKingInCheck(currentColor, board.pieces);\r\n\r\n    if (srcPiece) {\r\n      srcPiece.point.col = col;\r\n      srcPiece.point.row = row;\r\n    }\r\n\r\n    if (destPiece) {\r\n      board.pieces.push(destPiece);\r\n    }\r\n\r\n    return isBound;\r\n  }\r\n\r\n  public static format(sourcePoint: Point, destPoint: Point, reverted: boolean) {\r\n    if (reverted) {\r\n      let sourceX = 104 - sourcePoint.col;\r\n      let destX = 104 - destPoint.col;\r\n      return String.fromCharCode(sourceX) + (sourcePoint.row + 1)\r\n        + String.fromCharCode(destX) + (destPoint.row + 1);\r\n    } else {\r\n      let incrementX = 97;\r\n      return String.fromCharCode(sourcePoint.col + incrementX) + (Math.abs(sourcePoint.row - 7) + 1)\r\n        + String.fromCharCode(destPoint.col + incrementX) + (Math.abs(destPoint.row - 7) + 1);\r\n    }\r\n  }\r\n\r\n}\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {Subject} from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxChessBoardService {\r\n\r\n  private componentMethodCallSource = new Subject<any>();\r\n\r\n  componentMethodCalled$ = this.componentMethodCallSource.asObservable();\r\n\r\n  reset() {\r\n    this.componentMethodCallSource.next();\r\n  }\r\n\r\n}\r\n","import {AbstractPiece} from './abstract-piece';\r\nimport {Point} from '../models/pieces/point';\r\n\r\nexport abstract class PieceAbstractDecorator implements AbstractPiece{\r\n\r\n  piece: AbstractPiece;\r\n\r\n  protected constructor(piece: AbstractPiece) {\r\n    this.piece = piece;\r\n  }\r\n\r\n  abstract getPossibleCaptures(): Point[];\r\n\r\n  abstract getPossibleMoves(): Point[];\r\n\r\n}\r\n","import {PieceAbstractDecorator} from './piece-abstract-decorator';\r\nimport {Point} from '../models/pieces/point';\r\nimport {AbstractPiece} from './abstract-piece';\r\nimport {MoveUtils} from '../utils/move-utils';\r\nimport {Color} from '../models/pieces/color';\r\nimport {NgxChessBoardComponent} from '../ngx-chess-board.component';\r\nimport {Board} from '../models/board';\r\n\r\nexport class AvailableMoveDecorator extends PieceAbstractDecorator {\r\n\r\n  private pointClicked: Point;\r\n  private color: Color;\r\n  private board: Board;\r\n\r\n  constructor(piece: AbstractPiece, pointClicked: Point, color: Color, board: Board) {\r\n    super(piece);\r\n    this.pointClicked = pointClicked;\r\n    this.color = color;\r\n    this.board = board;\r\n  }\r\n\r\n  getPossibleCaptures(): Point[] {\r\n    return this.piece.getPossibleCaptures()\r\n      .filter(point => !MoveUtils.willMoveCauseCheck(this.color, this.pointClicked.row, this.pointClicked.col, point.row, point.col, this.board));\r\n  }\r\n\r\n  getPossibleMoves(): Point[] {\r\n    return this.piece.getPossibleMoves()\r\n      .filter(point => !MoveUtils.willMoveCauseCheck(this.color, this.pointClicked.row, this.pointClicked.col, point.row, point.col, this.board));\r\n  }\r\n}\r\n","import {BoardState} from './board-state';\r\n\r\nexport class BoardStateProvider {\r\n\r\n  moves: BoardState[];\r\n\r\n  constructor() {\r\n    this.moves = [];\r\n  }\r\n\r\n  addMove(moveHistory: BoardState) {\r\n    this.moves.push(moveHistory);\r\n  }\r\n\r\n  getMoves() {\r\n    return this.moves;\r\n  }\r\n\r\n  pop() {\r\n    return this.moves.pop();\r\n  }\r\n\r\n  isEmpty() {\r\n    return this.moves.length === 0;\r\n  }\r\n\r\n  clear() {\r\n    this.moves = [];\r\n  }\r\n\r\n}\r\n","import {Piece} from '../models/pieces/piece';\r\nimport {Board} from '../models/board';\r\n\r\nexport class BoardState{\r\n\r\n  board: Board;\r\n\r\n  constructor(board: Board) {\r\n    this.board = board;\r\n  }\r\n\r\n}\r\n","export class HistoryMove {\r\n\r\n  move: string;\r\n  piece: string;\r\n  color: string;\r\n\r\n  constructor(move: string, piece: string, color: string) {\r\n    this.move = move;\r\n    this.piece = piece;\r\n    this.color = color;\r\n  }\r\n\r\n}\r\n","import {HistoryMove} from './history-move';\r\n\r\nexport class HistoryMoveProvider {\r\n\r\n  historyMoves: HistoryMove[];\r\n\r\n  constructor() {\r\n    this.historyMoves = [];\r\n  }\r\n\r\n  addMove(historyMove: HistoryMove) {\r\n    this.historyMoves.push(historyMove);\r\n  }\r\n\r\n  pop() {\r\n    return this.historyMoves.pop();\r\n  }\r\n\r\n  getAll() {\r\n    return this.historyMoves;\r\n  }\r\n\r\n  clear() {\r\n    this.historyMoves = [];\r\n  }\r\n\r\n}\r\n","export class Constants {\r\n static readonly DEFAULT_DARK_TILE_COLOR = 'rgb(97, 84, 61)';\r\n  static readonly DEFAULT_LIGHT_TILE_COLOR = '#BAA378';\r\n\r\n  static readonly DEFAULT_SIZE = 400;\r\n  static readonly MIN_BOARD_SIZE = 100;\r\n  static readonly MAX_BOARD_SIZE = 4000;\r\n\r\n}\r\n","export class CoordsProvider {\r\n\r\n  private _xCoords: string[] = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\r\n  private _yCoords: number[] = [8, 7, 6, 5, 4, 3, 2, 1];\r\n\r\n  reverse() {\r\n    this._xCoords = this._xCoords.reverse();\r\n    this._yCoords = this._yCoords.reverse();\r\n  }\r\n\r\n  get xCoords(): string[] {\r\n    return this._xCoords;\r\n  }\r\n\r\n  get yCoords(): number[] {\r\n    return this._yCoords;\r\n  }\r\n\r\n  reset() {\r\n    this.init();\r\n  }\r\n\r\n  private init() {\r\n    this._xCoords = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\r\n    this._yCoords = [8, 7, 6, 5, 4, 3, 2, 1];\r\n  }\r\n}\r\n","import {Pawn} from '../models/pieces/pawn';\r\nimport {Point} from '../models/pieces/point';\r\nimport {Color} from '../models/pieces/color';\r\nimport {UnicodeConstants} from '../utils/unicode-constants';\r\nimport {Rook} from '../models/pieces/rook';\r\nimport {Knight} from '../models/pieces/knight';\r\nimport {Bishop} from '../models/pieces/bishop';\r\nimport {Queen} from '../models/pieces/queen';\r\nimport {King} from '../models/pieces/king';\r\nimport {Board} from '../models/board';\r\n\r\nexport class BoardLoader {\r\n  private board: Board;\r\n\r\n\r\n  constructor(board: Board) {\r\n    this.board = board;\r\n  }\r\n\r\n  addPieces() {\r\n    this.board.pieces = [];\r\n    // piony czarne\r\n    for (let i = 0; i < 8; ++i) {\r\n      this.board.pieces.push(new Pawn(new Point(1, i), Color.BLACK, UnicodeConstants.BLACK_PAWN, this.board));\r\n    }\r\n    this.board.pieces.push(new Rook(new Point(0, 0), Color.BLACK, UnicodeConstants.BLACK_ROOK, this.board));\r\n    this.board.pieces.push(new Knight(new Point(0, 1), Color.BLACK, UnicodeConstants.BLACK_KNIGHT, this.board));\r\n    this.board.pieces.push(new Bishop(new Point(0, 2), Color.BLACK, UnicodeConstants.BLACK_BISHOP, this.board));\r\n    this.board.pieces.push(new Queen(new Point(0, 3), Color.BLACK, UnicodeConstants.BLACK_QUEEN, this.board));\r\n    this.board.pieces.push(new King(new Point(0, 4), Color.BLACK, UnicodeConstants.BLACK_KING, this.board));\r\n    this.board.pieces.push(new Bishop(new Point(0, 5), Color.BLACK, UnicodeConstants.BLACK_BISHOP, this.board));\r\n    this.board.pieces.push(new Knight(new Point(0, 6), Color.BLACK, UnicodeConstants.BLACK_KNIGHT, this.board));\r\n    this.board.pieces.push(new Rook(new Point(0, 7), Color.BLACK, UnicodeConstants.BLACK_ROOK, this.board));\r\n\r\n\r\n    // piony biale\r\n    for (let i = 0; i < 8; ++i) {\r\n      this.board.pieces.push(new Pawn(new Point(6, i), Color.WHITE, UnicodeConstants.WHITE_PAWN, this.board));\r\n    }\r\n    this.board.pieces.push(new Rook(new Point(7, 0), Color.WHITE, UnicodeConstants.WHITE_ROOK, this.board));\r\n    this.board.pieces.push(new Knight(new Point(7, 1), Color.WHITE, UnicodeConstants.WHITE_KNIGHT, this.board));\r\n    this.board.pieces.push(new Bishop(new Point(7, 2), Color.WHITE, UnicodeConstants.WHITE_BISHOP, this.board));\r\n    this.board.pieces.push(new Queen(new Point(7, 3), Color.WHITE, UnicodeConstants.WHITE_QUEEN, this.board));\r\n    this.board.pieces.push(new King(new Point(7, 4), Color.WHITE, UnicodeConstants.WHITE_KING, this.board));\r\n    this.board.pieces.push(new Bishop(new Point(7, 5), Color.WHITE, UnicodeConstants.WHITE_BISHOP, this.board));\r\n    this.board.pieces.push(new Knight(new Point(7, 6), Color.WHITE, UnicodeConstants.WHITE_KNIGHT, this.board));\r\n    this.board.pieces.push(new Rook(new Point(7, 7), Color.WHITE, UnicodeConstants.WHITE_ROOK, this.board));\r\n\r\n    this.board.calculateFEN();\r\n  }\r\n\r\n  loadFEN(fen: string) {\r\n    if (fen) {\r\n      this.board.reverted = false;\r\n      this.board.pieces = [];\r\n      let split = fen.split('/');\r\n      for (let i = 0; i < 8; ++i) {\r\n        let pointer = 0;\r\n        for (let j = 0; j < 8; ++j) {\r\n          let chunk = split[i].charAt(j);\r\n          if (chunk.match(/[0-9]/)) {\r\n            pointer += Number(chunk);\r\n          } else {\r\n            switch (chunk) {\r\n              case 'r':\r\n                this.board.pieces.push(new Rook(new Point(i, pointer), Color.BLACK, UnicodeConstants.BLACK_ROOK, this.board));\r\n                break;\r\n              case 'n':\r\n                this.board.pieces.push(new Knight(new Point(i, pointer), Color.BLACK, UnicodeConstants.BLACK_KNIGHT, this.board));\r\n\r\n                break;\r\n              case 'b':\r\n                this.board.pieces.push(new Bishop(new Point(i, pointer), Color.BLACK, UnicodeConstants.BLACK_BISHOP, this.board));\r\n                break;\r\n              case 'q':\r\n                this.board.pieces.push(new Queen(new Point(i, pointer), Color.BLACK, UnicodeConstants.BLACK_QUEEN, this.board));\r\n                break;\r\n              case 'k':\r\n                this.board.pieces.push(new King(new Point(i, pointer), Color.BLACK, UnicodeConstants.BLACK_KING, this.board));\r\n                break;\r\n              case 'p': {\r\n                let pawn = new Pawn(new Point(i, pointer), Color.BLACK, UnicodeConstants.BLACK_PAWN, this.board);\r\n                if ((pawn.color === Color.BLACK && pawn.point.row !== 1) || (pawn.color === Color.WHITE && pawn.point.row !== 6)) {\r\n                  pawn.isMovedAlready = true;\r\n                }\r\n                this.board.pieces.push(pawn);\r\n                break;\r\n              }\r\n              case 'R':\r\n                this.board.pieces.push(new Rook(new Point(i, pointer), Color.WHITE, UnicodeConstants.WHITE_ROOK, this.board));\r\n\r\n                break;\r\n              case 'N':\r\n                this.board.pieces.push(new Knight(new Point(i, pointer), Color.WHITE, UnicodeConstants.WHITE_KNIGHT, this.board));\r\n                break;\r\n\r\n              case 'B':\r\n                this.board.pieces.push(new Bishop(new Point(i, pointer), Color.WHITE, UnicodeConstants.WHITE_BISHOP, this.board));\r\n                break;\r\n\r\n              case 'Q':\r\n                this.board.pieces.push(new Queen(new Point(i, pointer), Color.WHITE, UnicodeConstants.WHITE_QUEEN, this.board));\r\n                break;\r\n\r\n              case 'K':\r\n                this.board.pieces.push(new King(new Point(i, pointer), Color.WHITE, UnicodeConstants.WHITE_KING, this.board));\r\n                break;\r\n\r\n              case 'P': {\r\n                let pawn = new Pawn(new Point(i, pointer), Color.WHITE, UnicodeConstants.WHITE_PAWN, this.board);\r\n                if ((pawn.color === Color.BLACK && pawn.point.row !== 1) || (pawn.color === Color.WHITE && pawn.point.row !== 6)) {\r\n                  pawn.isMovedAlready = true;\r\n                }\r\n                this.board.pieces.push(pawn);\r\n                break;\r\n              }\r\n            }\r\n            ++pointer;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setCurrentPlayer(fen);\r\n      this.setCastles(fen);\r\n      this.setEnPassant(fen);\r\n      this.setFullMoveCount(fen);\r\n    } else {\r\n      throw Error('Incorrect FEN provided');\r\n    }\r\n  }\r\n\r\n\r\n  private setCurrentPlayer(fen: string) {\r\n    if (fen) {\r\n      let split = fen.split(' ');\r\n      this.board.currentWhitePlayer = split[1] === 'w';\r\n    }\r\n  }\r\n\r\n  setBoard(board: Board) {\r\n    this.board = board;\r\n  }\r\n\r\n  private setCastles(fen: string) {\r\n    if (fen) {\r\n      let split = fen.split(' ');\r\n      let castleChunk = split[2];\r\n\r\n      if (!castleChunk.includes('K')) {\r\n        this.setRookAlreadyMoved(Color.WHITE, 7);\r\n      }\r\n\r\n      if (!castleChunk.includes('Q')) {\r\n        this.setRookAlreadyMoved(Color.WHITE, 0);\r\n      }\r\n\r\n      if (!castleChunk.includes('k')) {\r\n        this.setRookAlreadyMoved(Color.BLACK, 7);\r\n      }\r\n\r\n      if (!castleChunk.includes('q')) {\r\n        this.setRookAlreadyMoved(Color.BLACK, 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  private setFullMoveCount(fen: string) {\r\n\r\n  }\r\n\r\n  private setEnPassant(fen: string) {\r\n    if (fen) {\r\n      let split = fen.split(' ');\r\n      let enPassantPoint = split[3];\r\n\r\n      if (enPassantPoint === '-') {\r\n        return;\r\n      }\r\n\r\n      // if()\r\n    }\r\n  }\r\n\r\n  private setRookAlreadyMoved(color: Color, col: number) {\r\n    let rook = <Rook> this.board.pieces.find(e => e.color === color && e instanceof Rook && e.point.col === col);\r\n    rook.isMovedAlready = true;\r\n  }\r\n}\r\n","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\r\nimport {Piece} from '../models/pieces/piece';\r\nimport {Observable} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-piece-promotion-modal',\r\n  templateUrl: './piece-promotion-modal.component.html',\r\n  styleUrls: ['./piece-promotion-modal.component.scss']\r\n})\r\nexport class PiecePromotionModalComponent {\r\n\r\n  @ViewChild('myModal', {static: false}) modal: ElementRef;\r\n\r\n  selectedIndex: number = 1;\r\n  private onCloseCallback: (index: number) => void;\r\n\r\n  open(closeCallback: (index: number) => void) {\r\n    this.onCloseCallback = closeCallback;\r\n    this.modal.nativeElement.style.display = 'block';\r\n  }\r\n\r\n  async close() {\r\n    this.onCloseCallback(this.selectedIndex);\r\n    this.modal.nativeElement.style.display = 'none';\r\n  }\r\n\r\n  changeSelection(index: number){\r\n    this.selectedIndex = index;\r\n  }\r\n\r\n}\r\n","import {DrawPoint} from './draw-point';\r\n\r\nexport class Arrow {\r\n\r\n  start: DrawPoint;\r\n  end: DrawPoint;\r\n\r\n  isEqual(arrow: Arrow) {\r\n    return arrow && this.start.isEqual(arrow.start) && this.end.isEqual(arrow.end);\r\n  }\r\n\r\n}\r\n","export class DrawPoint {\r\n\r\n  x: number;\r\n  y: number;\r\n\r\n  constructor(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  isEqual(that: DrawPoint) {\r\n    return that && that.x === this.x && this.y === that.y;\r\n  }\r\n\r\n}\r\n","import {DrawPoint} from './draw-point';\r\n\r\nexport class Circle {\r\n\r\n  drawPoint: DrawPoint;\r\n\r\n  isEqual(circle: Circle) {\r\n    return circle && this.drawPoint.isEqual(circle.drawPoint);\r\n  }\r\n\r\n}\r\n","import {Circle} from './circle';\r\nimport {Arrow} from './arrow';\r\n\r\nexport class DrawProvider {\r\n\r\n  private _circles: Circle[];\r\n  private _arrows: Arrow[];\r\n\r\n\r\n  constructor() {\r\n    this._arrows = [];\r\n    this._circles = [];\r\n  }\r\n\r\n  addCircle(circle: Circle) {\r\n    this.circles.push(circle);\r\n  }\r\n\r\n  addArrow(arrow: Arrow) {\r\n    this.arrows.push(arrow);\r\n  }\r\n\r\n  get circles(): Circle[] {\r\n    return this._circles;\r\n  }\r\n\r\n  get arrows(): Arrow[] {\r\n    return this._arrows;\r\n  }\r\n\r\n  containsCircle(circle: Circle) {\r\n    return this.circles.some(e => e.isEqual(circle));\r\n  }\r\n\r\n  containsArrow(arrow: Arrow) {\r\n    return this.arrows.some(e => e.isEqual(arrow));\r\n  }\r\n\r\n  clear() {\r\n    this._arrows = [];\r\n    this._circles = [];\r\n  }\r\n\r\n}\r\n","import {Component, ElementRef, EventEmitter, HostListener, Input, OnInit, Output, ViewChild} from '@angular/core';\r\nimport {Piece} from './models/pieces/piece';\r\nimport {Color} from './models/pieces/color';\r\nimport {King} from './models/pieces/king';\r\nimport {UnicodeConstants} from './utils/unicode-constants';\r\nimport {Point} from './models/pieces/point';\r\nimport {Rook} from './models/pieces/rook';\r\nimport {Queen} from './models/pieces/queen';\r\nimport {Pawn} from './models/pieces/pawn';\r\nimport {Board} from './models/board';\r\nimport {MoveUtils} from './utils/move-utils';\r\nimport {NgxChessBoardService} from './service/ngx-chess-board.service';\r\nimport {NgxChessBoardView} from './ngx-chess-board-view';\r\nimport {AvailableMoveDecorator} from './piece-decorator/available-move-decorator';\r\nimport {BoardStateProvider} from './board-state-provider/board-state-provider';\r\nimport {BoardState} from './board-state-provider/board-state';\r\nimport {HistoryMove} from './history-move-provider/history-move';\r\nimport {HistoryMoveProvider} from './history-move-provider/history-move-provider';\r\nimport {Constants} from './utils/constants';\r\nimport {CoordsProvider} from './coords/coords-provider';\r\nimport {BoardLoader} from './board-state-provider/board-loader';\r\nimport {CdkDragEnd, CdkDragStart} from '@angular/cdk/drag-drop';\r\nimport {PiecePromotionModalComponent} from './piece-promotion-modal/piece-promotion-modal.component';\r\nimport {Bishop} from './models/pieces/bishop';\r\nimport {Knight} from './models/pieces/knight';\r\nimport {Arrow} from './drawing-tools/arrow';\r\nimport {DrawPoint} from './drawing-tools/draw-point';\r\nimport {Circle} from './drawing-tools/circle';\r\nimport {DrawProvider} from './drawing-tools/draw-provider';\r\n\r\n@Component({\r\n  selector: 'ngx-chess-board',\r\n  templateUrl: './ngx-chess-board.component.html',\r\n  styleUrls: ['./ngx-chess-board.component.scss']\r\n})\r\nexport class NgxChessBoardComponent implements OnInit, NgxChessBoardView {\r\n\r\n  @Input('size')\r\n  public set size(size: number) {\r\n    if (size && size >= Constants.MIN_BOARD_SIZE && size <= Constants.MAX_BOARD_SIZE) {\r\n      this._size = size;\r\n    } else {\r\n      this._size = Constants.DEFAULT_SIZE;\r\n    }\r\n    this.drawProvider.clear();\r\n    this.calculatePieceSize();\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onRightClick(event) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  _size: number = Constants.DEFAULT_SIZE;\r\n\r\n  @Input('darkTileColor')\r\n  darkTileColor: string = Constants.DEFAULT_DARK_TILE_COLOR;\r\n\r\n  @Input('lightTileColor')\r\n  lightTileColor: string = Constants.DEFAULT_LIGHT_TILE_COLOR;\r\n\r\n  @Input('showCoords')\r\n  showCoords: boolean = true;\r\n\r\n  @Input('dragDisabled')\r\n  dragDisabled: boolean = false;\r\n\r\n  @Input('drawDisabled')\r\n  drawDisabled: boolean = false;\r\n\r\n  @Output()\r\n  onMove: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  pieceSize: number;\r\n  selected = false;\r\n\r\n  @ViewChild('boardRef', {static: false})\r\n  boardRef: ElementRef;\r\n\r\n  @ViewChild('modal', {static: false}) modal: PiecePromotionModalComponent;\r\n\r\n  board: Board;\r\n  boardStateProvider: BoardStateProvider;\r\n  moveHistoryProvider: HistoryMoveProvider;\r\n  boardLoader: BoardLoader;\r\n  coords: CoordsProvider = new CoordsProvider();\r\n  disabling = false;\r\n  drawProvider: DrawProvider;\r\n  drawPoint: DrawPoint;\r\n\r\n  constructor(private ngxChessBoardService: NgxChessBoardService) {\r\n    this.board = new Board();\r\n    this.boardLoader = new BoardLoader(this.board);\r\n    this.boardLoader.addPieces();\r\n    this.boardStateProvider = new BoardStateProvider();\r\n    this.moveHistoryProvider = new HistoryMoveProvider();\r\n    this.drawProvider = new DrawProvider();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.ngxChessBoardService.componentMethodCalled$.subscribe(() => {\r\n      this.board.reset();\r\n    });\r\n    this.calculatePieceSize();\r\n  }\r\n\r\n  async onMouseUp(event) {\r\n    if (event.which !== 1 && !this.drawDisabled) {\r\n      this.addDrawPoint(event.x, event.y);\r\n      return;\r\n    }\r\n\r\n    this.drawProvider.clear();\r\n\r\n    if (this.dragDisabled) {\r\n      return;\r\n    }\r\n    let pointClicked = this.getClickPoint(event);\r\n\r\n    if (this.board.activePiece && pointClicked.isEqual(this.board.activePiece.point) && this.disabling) {\r\n      this.disableSelection();\r\n      this.disabling = false;\r\n      return;\r\n    }\r\n    if (this.selected) {\r\n      this.handleClickEvent(pointClicked);\r\n      //   this.possibleMoves = activePiece.getPossibleMoves();\r\n    } else {\r\n      let pieceClicked = this.getPieceByPoint(pointClicked.row, pointClicked.col);\r\n      if (pieceClicked) {\r\n\r\n        if ((this.board.currentWhitePlayer && pieceClicked.color === Color.BLACK) || (!this.board.currentWhitePlayer && pieceClicked.color === Color.WHITE)) {\r\n          return;\r\n        }\r\n\r\n        this.prepareActivePiece(pieceClicked, pointClicked);\r\n      }\r\n    }\r\n  }\r\n\r\n  afterMoveActions() {\r\n    this.checkIfPawnFirstMove(this.board.activePiece);\r\n    this.checkIfRookMoved(this.board.activePiece);\r\n    this.checkIfKingMoved(this.board.activePiece);\r\n\r\n    this.board.blackKingChecked = this.board.isKingInCheck(Color.BLACK, this.board.pieces);\r\n    this.board.whiteKingChecked = this.board.isKingInCheck(Color.WHITE, this.board.pieces);\r\n\r\n    this.checkForPossibleMoves(Color.BLACK, 'Checkmate!');\r\n    this.checkForPossibleMoves(Color.WHITE, 'Checkmate!');\r\n\r\n    this.board.calculateFEN();\r\n    this.checkForPat(Color.BLACK);\r\n    this.checkForPat(Color.WHITE);\r\n    this.disabling = false;\r\n  }\r\n\r\n  disableSelection() {\r\n    this.selected = false;\r\n    this.board.possibleCaptures = [];\r\n    this.board.activePiece = null;\r\n    this.board.possibleMoves = [];\r\n  }\r\n\r\n  prepareActivePiece(pieceClicked: Piece, pointClicked: Point) {\r\n    this.board.activePiece = pieceClicked;\r\n    this.selected = true;\r\n    this.board.possibleCaptures = new AvailableMoveDecorator(pieceClicked, pointClicked, this.board.currentWhitePlayer ? Color.WHITE : Color.BLACK, this.board).getPossibleCaptures();\r\n    this.board.possibleMoves = new AvailableMoveDecorator(pieceClicked, pointClicked, this.board.currentWhitePlayer ? Color.WHITE : Color.BLACK, this.board).getPossibleMoves();\r\n  }\r\n\r\n  getPieceByPoint(row: number, col: number): Piece {\r\n    row = Math.floor(row);\r\n    col = Math.floor(col);\r\n    return this.board.pieces.find(e => e.point.col === col && e.point.row === row);\r\n  }\r\n\r\n  isKingChecked(piece: Piece) {\r\n    if (piece instanceof King) {\r\n      return piece.color === Color.WHITE ? this.board.whiteKingChecked : this.board.blackKingChecked;\r\n    }\r\n  }\r\n\r\n  getClickPoint(event) {\r\n    return new Point(\r\n      Math.floor((event.y - this.boardRef.nativeElement.getBoundingClientRect().top) / (this.boardRef.nativeElement.getBoundingClientRect().height / 8)),\r\n      Math.floor((event.x - this.boardRef.nativeElement.getBoundingClientRect().left) / (this.boardRef.nativeElement.getBoundingClientRect().width / 8)));\r\n  }\r\n\r\n  async movePiece(piece: Piece, newPoint: Point) {\r\n    this.moveHistoryProvider.addMove(new HistoryMove(MoveUtils.format(piece.point, newPoint, this.board.reverted), piece.constructor.name, piece.color === Color.WHITE ? 'white' : 'black'));\r\n    let destPiece = this.board.pieces.find(e => e.point.col === newPoint.col && e.point.row === newPoint.row);\r\n\r\n    if (destPiece && piece.color != destPiece.color) {\r\n      this.board.pieces = this.board.pieces.filter(e => e !== destPiece);\r\n    } else if (destPiece && piece.color === destPiece.color) {\r\n      return;\r\n    }\r\n    if (piece instanceof King) {\r\n      let squaresMoved = Math.abs(newPoint.col - piece.point.col);\r\n      if (squaresMoved > 1) {\r\n        if (newPoint.col < 3) {\r\n          let leftRook = this.board.getPieceByField(piece.point.row, 0);\r\n          leftRook.point.col = 3;\r\n        } else {\r\n          let rightRook = this.board.getPieceByField(piece.point.row, 7);\r\n          rightRook.point.col = 5;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (piece instanceof Pawn) {\r\n      this.checkIfPawnTakesEnPassant(newPoint);\r\n      this.checkIfPawnEnpassanted(piece, newPoint);\r\n    }\r\n\r\n    piece.point = newPoint;\r\n    this.increaseFullMoveCount();\r\n    this.board.currentWhitePlayer = !this.board.currentWhitePlayer;\r\n    return this.checkForPawnPromote(piece);\r\n  }\r\n\r\n  checkIfPawnFirstMove(piece: Piece) {\r\n    if (piece instanceof Pawn) {\r\n      (piece as Pawn).isMovedAlready = true;\r\n    }\r\n  }\r\n\r\n  private checkIfRookMoved(piece: Piece) {\r\n    if (piece instanceof Rook) {\r\n      piece.isMovedAlready = true;\r\n    }\r\n  }\r\n\r\n  private checkIfKingMoved(piece: Piece) {\r\n    if (piece instanceof King) {\r\n      piece.isMovedAlready = true;\r\n    }\r\n  }\r\n\r\n  async checkForPawnPromote(piece: Piece) {\r\n    if (!(piece instanceof Pawn)) {\r\n      return;\r\n    }\r\n\r\n    if (piece.point.row === 0 || piece.point.row === 7) {\r\n      this.board.pieces = this.board.pieces.filter(e => e !== piece);\r\n      this.openPromoteDialog(piece);\r\n    }\r\n  }\r\n\r\n  async openPromoteDialog(piece: Piece) {\r\n    this.modal.open((index) => {\r\n      let isWhite = piece.color === Color.WHITE;\r\n      switch (index) {\r\n        case 1:\r\n          this.board.pieces.push(new Queen(piece.point, piece.color, isWhite ? UnicodeConstants.WHITE_QUEEN : UnicodeConstants.BLACK_QUEEN, this.board));\r\n          break;\r\n        case 2:\r\n          this.board.pieces.push(new Rook(piece.point, piece.color, isWhite ? UnicodeConstants.WHITE_ROOK : UnicodeConstants.BLACK_ROOK, this.board));\r\n          break;\r\n        case 3:\r\n          this.board.pieces.push(new Bishop(piece.point, piece.color, isWhite ? UnicodeConstants.WHITE_BISHOP : UnicodeConstants.BLACK_BISHOP, this.board));\r\n          break;\r\n        case 4:\r\n          this.board.pieces.push(new Knight(piece.point, piece.color, isWhite ? UnicodeConstants.WHITE_KNIGHT : UnicodeConstants.BLACK_KNIGHT, this.board));\r\n          break;\r\n        default:\r\n          this.board.pieces.push(new Queen(piece.point, piece.color, isWhite ? UnicodeConstants.WHITE_QUEEN : UnicodeConstants.BLACK_QUEEN, this.board));\r\n          break;\r\n      }\r\n      this.afterMoveActions();\r\n    });\r\n  }\r\n\r\n  private checkForPossibleMoves(color: Color, text: string) {\r\n    if (!this.board.pieces.filter(e => e.color === color)\r\n      .some(e => e.getPossibleMoves().some(f => !MoveUtils.willMoveCauseCheck(color, e.point.row, e.point.col, f.row, f.col, this.board))\r\n        || e.getPossibleCaptures().some(f => !MoveUtils.willMoveCauseCheck(color, e.point.row, e.point.col, f.row, f.col, this.board)))) {\r\n      alert(text);\r\n    }\r\n  }\r\n\r\n  private checkForPat(color: Color) {\r\n    if (color === Color.WHITE && !this.board.whiteKingChecked) {\r\n      this.checkForPossibleMoves(color, 'Stalemate!');\r\n    } else if (color === Color.BLACK && !this.board.blackKingChecked) {\r\n      this.checkForPossibleMoves(color, 'Stalemate!');\r\n    }\r\n  }\r\n\r\n  private checkIfPawnEnpassanted(piece: Pawn, newPoint: Point) {\r\n    if (Math.abs(piece.point.row - newPoint.row) > 1) {\r\n      this.board.enPassantPiece = piece;\r\n      this.board.enPassantPoint = new Point((piece.point.row + newPoint.row) / 2, piece.point.col);\r\n    } else {\r\n      this.board.enPassantPoint = null;\r\n      this.board.enPassantPiece = null;\r\n    }\r\n  }\r\n\r\n  private checkIfPawnTakesEnPassant(newPoint: Point) {\r\n    if (newPoint.isEqual(this.board.enPassantPoint)) {\r\n      this.board.pieces = this.board.pieces\r\n        .filter(piece => piece !== this.board.enPassantPiece);\r\n      this.board.enPassantPoint = null;\r\n      this.board.enPassantPiece = null;\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.boardStateProvider.clear();\r\n    this.moveHistoryProvider.clear();\r\n    this.boardLoader.addPieces();\r\n    this.board.reset();\r\n    this.coords.reset();\r\n    this.drawProvider.clear();\r\n  }\r\n\r\n  reverse() {\r\n    this.selected = false;\r\n    this.board.reverse();\r\n    this.coords.reverse();\r\n  }\r\n\r\n  private saveClone() {\r\n    let clone = this.board.clone();\r\n\r\n    if (this.board.reverted) {\r\n      clone.reverse();\r\n    }\r\n    this.boardStateProvider.addMove(new BoardState(clone));\r\n  }\r\n\r\n  undo() {\r\n    if (!this.boardStateProvider.isEmpty()) {\r\n      let lastBoard = this.boardStateProvider.pop().board;\r\n      if (this.board.reverted) {\r\n        lastBoard.reverse();\r\n      }\r\n      this.board = lastBoard;\r\n      this.boardLoader.setBoard(this.board);\r\n      this.board.possibleCaptures = [];\r\n      this.board.possibleMoves = [];\r\n      this.moveHistoryProvider.pop();\r\n    }\r\n  }\r\n\r\n  getMoveHistory() {\r\n    return JSON.stringify(this.moveHistoryProvider.getAll());\r\n  }\r\n\r\n  private calculatePieceSize() {\r\n    this.pieceSize = this._size / 10;\r\n  }\r\n\r\n  setFEN(fen: string) {\r\n    try {\r\n      this.boardLoader.loadFEN(fen);\r\n    } catch (e) {\r\n      this.boardLoader.addPieces();\r\n    }\r\n  }\r\n\r\n  getFEN() {\r\n    return this.board.fen;\r\n  }\r\n\r\n  private increaseFullMoveCount() {\r\n    if (!this.board.currentWhitePlayer) {\r\n      ++this.board.fullMoveCount;\r\n    }\r\n  }\r\n\r\n  dragEnded(event: CdkDragEnd) {\r\n    event.source.reset();\r\n    event.source.element.nativeElement.style.zIndex = '0';\r\n    event.source.element.nativeElement.style.pointerEvents = 'auto';\r\n    event.source.element.nativeElement.style.touchAction = 'auto';\r\n  }\r\n\r\n  dragStart(event: CdkDragStart) {\r\n    let style = event.source.element.nativeElement.style;\r\n    style.position = 'relative';\r\n    style.zIndex = '1000';\r\n    style.touchAction = 'none';\r\n    style.pointerEvents = 'none';\r\n  }\r\n\r\n  private async handleClickEvent(pointClicked: Point) {\r\n    if (this.board.isPointInPossibleMoves(pointClicked) || this.board.isPointInPossibleCaptures(pointClicked)) {\r\n      this.saveClone();\r\n      this.board.lastMoveSrc = new Point(this.board.activePiece.point.row, this.board.activePiece.point.col);\r\n      this.board.lastMoveDest = pointClicked;\r\n      await this.movePiece(this.board.activePiece, pointClicked);\r\n      this.afterMoveActions();\r\n      this.onMove.emit();\r\n    }\r\n\r\n    this.disableSelection();\r\n    let pieceClicked = this.getPieceByPoint(pointClicked.row, pointClicked.col);\r\n    if (pieceClicked) {\r\n\r\n      if ((this.board.currentWhitePlayer && pieceClicked.color === Color.BLACK) || (!this.board.currentWhitePlayer && pieceClicked.color === Color.WHITE)) {\r\n        return;\r\n      }\r\n\r\n      this.prepareActivePiece(pieceClicked, pointClicked);\r\n    }\r\n  }\r\n\r\n  onMouseDown(event: any) {\r\n\r\n    if (event.which !== 1) {\r\n      this.drawPoint = this.getDrawingPoint(event.x, event.y);\r\n      return;\r\n    }\r\n    let pointClicked = this.getClickPoint(event);\r\n\r\n    this.drawProvider.clear();\r\n\r\n    if (this.board.activePiece && pointClicked.isEqual(this.board.activePiece.point)) {\r\n      this.disabling = true;\r\n      return;\r\n    }\r\n\r\n    if (this.selected) {\r\n      this.handleClickEvent(pointClicked);\r\n      //   this.possibleMoves = activePiece.getPossibleMoves();\r\n    } else {\r\n      let pieceClicked = this.getPieceByPoint(pointClicked.row, pointClicked.col);\r\n      if (pieceClicked) {\r\n\r\n        if ((this.board.currentWhitePlayer && pieceClicked.color === Color.BLACK) || (!this.board.currentWhitePlayer && pieceClicked.color === Color.WHITE)) {\r\n          return;\r\n        }\r\n\r\n        this.prepareActivePiece(pieceClicked, pointClicked);\r\n      }\r\n    }\r\n  }\r\n\r\n  getDrawingPoint(x: number, y: number) {\r\n    let squareSize = this._size / 8;\r\n    let xx = Math.floor((x - this.boardRef.nativeElement.getBoundingClientRect().left) / squareSize);\r\n    let yy = Math.floor((y - this.boardRef.nativeElement.getBoundingClientRect().top) / squareSize);\r\n    return new DrawPoint(\r\n      Math.floor(xx * squareSize + squareSize / 2),\r\n      Math.floor(yy * squareSize + squareSize / 2),\r\n    );\r\n  }\r\n\r\n  private addDrawPoint(x: any, y: any) {\r\n    let upPoint = this.getDrawingPoint(x, y);\r\n    if (this.drawPoint.isEqual(upPoint)) {\r\n      let circle = new Circle();\r\n      circle.drawPoint = upPoint;\r\n      if (!this.drawProvider.containsCircle(circle)) {\r\n        this.drawProvider.addCircle(circle);\r\n      }\r\n    } else {\r\n      let arrow = new Arrow();\r\n      arrow.start = this.drawPoint;\r\n      arrow.end = upPoint;\r\n\r\n      if (!this.drawProvider.containsArrow(arrow)) {\r\n        this.drawProvider.addArrow(arrow);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import {ModuleWithProviders, NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {NgxChessBoardComponent} from './ngx-chess-board.component';\r\nimport {NgxChessBoardService} from './service/ngx-chess-board.service';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport {PiecePromotionModalComponent} from './piece-promotion-modal/piece-promotion-modal.component';\r\n\r\n@NgModule({\r\n  declarations: [NgxChessBoardComponent, PiecePromotionModalComponent],\r\n  imports: [\r\n    CommonModule,\r\n    DragDropModule,\r\n  ],\r\n  exports: [NgxChessBoardComponent]\r\n})\r\nexport class NgxChessBoardModule {\r\n\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: NgxChessBoardModule,\r\n      providers: [NgxChessBoardService]\r\n    };\r\n  }\r\n\r\n}\r\n","export interface NgxChessBoardView {\r\n  reset();\r\n\r\n  reverse();\r\n\r\n  undo();\r\n\r\n  getMoveHistory();\r\n\r\n  setFEN(fen: string);\r\n\r\n  getFEN();\r\n\r\n}\r\n"],"names":["tslib_1.__extends","cloneDeep","Subject","Injectable","Component","ViewChild","EventEmitter","Input","HostListener","Output","NgModule","CommonModule","DragDropModule"],"mappings":"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"}